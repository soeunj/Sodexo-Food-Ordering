<!DOCTYPE html>
<html lang="en">

<head>
  <%- include header.ejs %>
  <script type = "text/javascript" src="../../js/order.js"></script>
</head>

<body>

  <nav class="navbar navbar-inverse sidebar" role="navigation">
    <div class="container-fluid">
      <%- include small_device_nav.ejs %>
        <div id="tab" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="/">HOME<span style="font-size:16px;" class="pull-right hidden-xs glyphicon glyphicon-home"></span></a></li>
            <li class="dropdown">
              <a href="/menu" class="dropdown-toggle" data-toggle="dropdown">MENU<span class="caret"></span><span style="font-size:16px;" class="pull-right hidden-xs glyphicon glyphicon-cutlery"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="/menu">TODAY</a></li>
                <li><a href="/menu/mon">MONDAY</a></li>
                <li><a href="/menu/tue">TUESDAY</a></li>
                <li><a href="/menu/wed">WEDNESDAY</a></li>
                <li><a href="/menu/thu">THURSDAY</a></li>
                <li><a href="/menu/fri">FRIDAY</a></li>
              </ul>
            </li>
            <li class="active"><a href="/order">ORDER<span style="font-size:16px;" class="pull-right hidden-xs glyphicon glyphicon-shopping-cart"></span></a></li>
            <li class="dropdown">
              <a href="/statistic" class="dropdown-toggle" data-toggle="dropdown">STATISTIC<span class="caret"></span><span style="font-size:16px;" class="pull-right hidden-xs glyphicon glyphicon-stats"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="/statistic">TODAY</a></li>
                <li><a href="/statistic/thismonth">OTHER</a></li>
              </ul>
            </li>
          </ul>
        </div>
    </div>
  </nav>
  <div class="main container-fluid text-center">
    <h2>ORDER LIST</h2>
    <p>This is your order list.</br>If you want to confirm your order, click order button.</p>
    </br>
    <table class="table">
      <thead>
        <tr>
          <th class="col-xs-3 text-center">Date</th>
          <th class="col-xs-6 text-center">Menu</th>
          <th class="col-xs-3 text-center">Count</th>
          <th class="col-xs-3 text-center">Count Confirm</th>
          <th class="col-xs-3 text-center">Delete</th>
        </tr>
      </thead>
      <tbody id="orderlist">
        <% for(var i=0; i<orderlist.length; i++) {%>
          <tr id="<%=orderlist[i]['_id']%>">
            <td class="col-xs-3 text-center">
              <%=orderlist[i]['date'].toString().slice(0,15)%>
            </td>
            <td class="col-xs-6 text-center">
              <%=orderlist[i]['menu']%>
            </td>
            <td class="col-xs-3 text-center">
              <input type="number" id="<%=orderlist[i]['_id']%>_count" value="<%=orderlist[i]['count']%>" class="form-control">
            </td>
            <td class="col-xs-3 text-center">
              <button id="<%=orderlist[i]['_id']%>_countsubmit" class="btn btn-default" onclick="confirm_count(this.id)">
                <i class="glyphicon glyphicon-ok"></i>
              </button>
            </td>
            <td class="col-xs-3 text-center"><button id="delete<%=i%>" class="btn btn-default" onclick="delete_order(this.id)"><i class="glyphicon glyphicon-remove"></i></button></td>
          </tr>
          <% } %>
      </tbody>
    </table>
    <button id="order" class="btn btn-success pull-right" onclick="submitOrder();submitAll()">Order</button>
  </div>
  <script type="text/javascript">

    var data = <%-JSON.stringify(orderlist)%>;

    if (data.length == 0) {
      $('#order').prop('disabled', true);
    }
    if (data.length > 7) {
      console.log("quit");
    }
  </script>
</body>

</html>
